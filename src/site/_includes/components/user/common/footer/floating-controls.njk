<aside id="floating-control">
  <span id="theme-switch">
    <i class="svg-icon light" icon-name="sun" aria-hidden="true"></i>
    <i class="svg-icon dark" icon-name="moon" aria-hidden="true"></i>
  </span>
</aside>


<script>
  function setThemeIcon(theme) {
    let toAdd;
    switch (theme) {
      case 'light':
        toRemove = ['dark'];
        break;
      default:
        toRemove = ['light'];
        break;
    }
    document.getElementById('theme-switch').classList.add(theme);
    document.getElementById('theme-switch').classList.remove(...toRemove);
  }
  function setTheme(theme, setIcon) {
    if (setIcon) {
      setThemeIcon(theme);
    }
    if (theme == "light") {
      document.body.classList.add('theme-light');
      document.body.classList.remove('theme-dark');
    } else {
      document.body.classList.remove('theme-light');
      document.body.classList.add('theme-dark');
    }
  }
  let theme = window.localStorage.getItem('site-theme') || "dark";
  setTheme(theme, true);
  window.theme = theme;
  window.localStorage.setItem('site-theme', theme);

  document.getElementById('theme-switch').addEventListener('click', function () {
    let theme;
    if (window.theme == 'dark') {
      theme = "light";
    } else {
      theme = "dark";
    }
    setTheme(theme, true);
    window.localStorage.setItem('site-theme', theme);
    window.theme = theme;
  })
</script>
